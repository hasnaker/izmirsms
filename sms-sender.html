<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“± SMS GÃ¶nder - HSD Core Labs</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #0d1b2a 100%);
            min-height: 100vh;
            padding: 15px;
            color: #fff;
        }
        .container { max-width: 480px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 25px; padding-top: 10px; }
        .logo { font-size: 42px; margin-bottom: 8px; }
        .header h1 {
            font-size: 22px; font-weight: 700;
            background: linear-gradient(90deg, #00d4ff, #00ff94);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .header p { color: #5a6a7a; font-size: 13px; margin-top: 4px; }
        .card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border-radius: 16px; padding: 20px; margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.06);
        }
        .card-title {
            font-size: 14px; color: #00d4ff; margin-bottom: 12px;
            display: flex; align-items: center; gap: 8px; font-weight: 600;
        }
        label { display: block; font-size: 12px; color: #7a8a9a; margin-bottom: 6px; }
        textarea, input[type="text"] {
            width: 100%; padding: 14px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px; background: rgba(0, 0, 0, 0.4);
            color: #fff; font-size: 15px; margin-bottom: 10px;
            font-family: inherit;
        }
        textarea:focus, input[type="text"]:focus {
            outline: none; border-color: #00d4ff;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }
        textarea { min-height: 100px; resize: vertical; }
        #phoneNumbers { min-height: 120px; font-family: 'SF Mono', Monaco, monospace; font-size: 14px; }
        .counter { text-align: right; font-size: 11px; color: #00ff94; margin-top: -6px; margin-bottom: 10px; }
        .btn {
            width: 100%; padding: 16px; border: none; border-radius: 12px;
            font-size: 16px; font-weight: 600; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #00d4ff 0%, #00ff94 100%);
            color: #000; box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        }
        .btn-primary:hover { transform: translateY(-2px); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .result {
            padding: 16px; border-radius: 12px; margin-top: 15px;
            text-align: center; display: none;
        }
        .result.success {
            background: rgba(0, 255, 148, 0.1); border: 1px solid rgba(0, 255, 148, 0.3);
            color: #00ff94; display: block;
        }
        .result.error {
            background: rgba(255, 68, 102, 0.1); border: 1px solid rgba(255, 68, 102, 0.3);
            color: #ff4466; display: block;
        }
        .result.loading {
            background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3);
            color: #00d4ff; display: block;
        }
        .progress-bar { height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; margin-top: 12px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #00d4ff, #00ff94); transition: width 0.3s; }
        .stats-row { display: flex; justify-content: space-around; margin-top: 20px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.06); }
        .stat { text-align: center; }
        .stat-value { font-size: 28px; font-weight: 700; background: linear-gradient(90deg, #00d4ff, #00ff94); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .stat-label { font-size: 10px; color: #5a6a7a; text-transform: uppercase; }
        .pdf-info { background: rgba(0, 212, 255, 0.08); border-radius: 10px; padding: 12px; margin-bottom: 12px; }
        .pdf-info-title { font-size: 12px; color: #00d4ff; margin-bottom: 8px; font-weight: 600; }
        .pdf-list { font-size: 12px; color: #8a9aaa; line-height: 1.6; }
        .pdf-list span { display: block; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .sending { animation: pulse 1.5s infinite; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ“±</div>
            <h1>SMS GÃ¶nder</h1>
            <p>HSD Core Labs</p>
        </div>
        
        <div class="card">
            <div class="card-title">ğŸ“ Telefon NumaralarÄ±</div>
            <label>Her satÄ±ra bir numara (05XX formatÄ±nda)</label>
            <textarea id="phoneNumbers" placeholder="+90 543 448 66 60
05321234567
05551234567">+90 543 448 66 60</textarea>
            <div class="counter" id="phoneCount">1 numara girildi</div>
        </div>
        
        <div class="card">
            <div class="card-title">ğŸ“„ PDF KlasÃ¶rÃ¼</div>
            <div class="pdf-info">
                <div class="pdf-info-title">GÃ¶nderilecek Belgeler:</div>
                <div class="pdf-list">
                    <span>ğŸ“‹ Analiz.pdf</span>
                    <span>ğŸ“‹ Terapi PlanÄ±.pdf</span>
                    <span>ğŸ“‹ Transkripsiyon.pdf</span>
                    <span>ğŸ“‹ Vaka FormÃ¼lasyonu.pdf</span>
                </div>
            </div>
            <label>Google Drive Link</label>
            <input type="text" id="pdfLink" value="https://drive.google.com/drive/folders/1iDBSTrXz0H32oSynDUEdMtSiQ0ZZojse?usp=sharing">
        </div>
        
        <div class="card">
            <div class="card-title">âœ‰ï¸ Mesaj Ä°Ã§eriÄŸi</div>
            <textarea id="message">Merhaba,

Belgeleriniz hazir! Asagidaki linkten erisebilirsiniz:

[LINK]

Icerik:
- Analiz.pdf
- Terapi Plani.pdf
- Transkripsiyon.pdf
- Vaka Formulasyonu.pdf

Saygilarimizla,
HSD Core Labs</textarea>
            <div class="counter" id="charCount">0 karakter</div>
        </div>
        
        <button class="btn btn-primary" id="sendBtn" onclick="sendAllSMS()">
            <span>ğŸš€</span>
            <span>GÃ¶nder</span>
        </button>
        
        <div class="result" id="result"></div>
        
        <div class="card" id="statsCard" style="display: none;">
            <div class="stats-row">
                <div class="stat">
                    <div class="stat-value" id="sentCount">0</div>
                    <div class="stat-label">BaÅŸarÄ±lÄ±</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="failedCount">0</div>
                    <div class="stat-label">BaÅŸarÄ±sÄ±z</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="totalCount">0</div>
                    <div class="stat-label">Toplam</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const CONFIG = {
            username: '8503047798',
            password: '874.3C4',
            sender: 'HSDCORELABS'
        };

        document.getElementById('phoneNumbers').addEventListener('input', function() {
            const numbers = this.value.split('\n').filter(n => n.trim().length >= 10);
            document.getElementById('phoneCount').textContent = numbers.length + ' numara girildi';
        });

        document.getElementById('message').addEventListener('input', updateCharCount);
        document.getElementById('pdfLink').addEventListener('input', updateCharCount);

        function updateCharCount() {
            const message = getFinalMessage();
            document.getElementById('charCount').textContent = message.length + ' karakter (' + Math.ceil(message.length/160) + ' SMS)';
        }

        function getFinalMessage() {
            return document.getElementById('message').value.replace('[LINK]', document.getElementById('pdfLink').value);
        }

        function cleanPhone(phone) {
            let cleaned = phone.replace(/\D/g, '');
            if (cleaned.startsWith('90') && cleaned.length === 12) cleaned = '0' + cleaned.slice(2);
            if (!cleaned.startsWith('0') && cleaned.length === 10) cleaned = '0' + cleaned;
            return cleaned;
        }

        async function sendSMS(phone, message) {
            const params = new URLSearchParams({
                usercode: CONFIG.username,
                password: CONFIG.password,
                gsmno: phone,
                message: message,
                msgheader: CONFIG.sender
            });

            const apiUrl = 'https://api.netgsm.com.tr/sms/send/get?' + params.toString();
            
            // Birden fazla proxy dene
            const proxies = [
                'https://api.allorigins.win/raw?url=',
                'https://corsproxy.org/?',
                'https://proxy.cors.sh/'
            ];

            for (const proxy of proxies) {
                try {
                    const response = await fetch(proxy + encodeURIComponent(apiUrl), {
                        headers: { 'x-cors-api-key': 'temp_' + Date.now() }
                    });
                    if (response.ok) {
                        const text = await response.text();
                        return { success: text.startsWith('00'), response: text };
                    }
                } catch (e) {
                    console.log('Proxy failed:', proxy, e.message);
                }
            }

            // Son Ã§are: no-cors (baÅŸarÄ±lÄ± varsay)
            try {
                await fetch(apiUrl, { mode: 'no-cors' });
                return { success: true, response: 'sent-nocors' };
            } catch (e) {
                return { success: false, response: e.message };
            }
        }

        async function sendAllSMS() {
            const phoneText = document.getElementById('phoneNumbers').value;
            const message = getFinalMessage();
            const resultEl = document.getElementById('result');
            const sendBtn = document.getElementById('sendBtn');
            const statsCard = document.getElementById('statsCard');

            const phones = phoneText.split('\n').map(p => cleanPhone(p.trim())).filter(p => p.length >= 10);

            if (phones.length === 0) {
                resultEl.className = 'result error';
                resultEl.innerHTML = 'âŒ LÃ¼tfen geÃ§erli telefon numarasÄ± girin!';
                return;
            }

            sendBtn.disabled = true;
            sendBtn.innerHTML = '<span class="sending">â³</span><span>GÃ¶nderiliyor...</span>';
            statsCard.style.display = 'block';

            let sent = 0, failed = 0;
            document.getElementById('totalCount').textContent = phones.length;

            resultEl.className = 'result loading';
            resultEl.innerHTML = '<div>ğŸ“¤ GÃ¶nderiliyor...</div><div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div><div id="progressText" style="margin-top:8px;font-size:12px;">0 / ' + phones.length + '</div>';

            for (let i = 0; i < phones.length; i++) {
                const result = await sendSMS(phones[i], message);
                if (result.success) sent++; else failed++;

                const progress = Math.round(((i + 1) / phones.length) * 100);
                document.getElementById('progressFill').style.width = progress + '%';
                document.getElementById('progressText').textContent = (i + 1) + ' / ' + phones.length;
                document.getElementById('sentCount').textContent = sent;
                document.getElementById('failedCount').textContent = failed;

                if (i < phones.length - 1) await new Promise(r => setTimeout(r, 500));
            }

            sendBtn.disabled = false;
            sendBtn.innerHTML = '<span>ğŸš€</span><span>GÃ¶nder</span>';

            if (sent > 0) {
                resultEl.className = 'result success';
                resultEl.innerHTML = 'âœ… ' + sent + ' SMS gÃ¶nderildi!' + (failed > 0 ? ' (' + failed + ' baÅŸarÄ±sÄ±z)' : '');
            } else {
                resultEl.className = 'result error';
                resultEl.innerHTML = 'âŒ GÃ¶nderim baÅŸarÄ±sÄ±z.';
            }
        }

        updateCharCount();
    </script>
</body>
</html>
